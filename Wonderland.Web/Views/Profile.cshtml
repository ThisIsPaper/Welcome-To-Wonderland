@inherits UmbracoViewPage<Profile>
@{
    Layout = "SitePage.cshtml";
}


<div class="page-bg" ng-controller="ProfileCtrl">

    <div class="container gutter">

        <div class="wgrid-main centered">

            <div class="boxx" m-radius-picker>

                <h1><span class="lighter"><span class="icon-icon_person margin-right-small"></span><span class="bigger">My <br/></span></span>profile</h1>

                <hr/>

                <h3>Your basic details</h3>




                <h4 class="tight">Name</h4>

                <div class="grid-8 grid-tablet-12 margin-bottom-large">
                    <div class="successful margin-bottom-small" ng-show="feedback.profileNameShowSuccess">Your name was successfully changed</div>
                    <div class="errorred margin-bottom-small" ng-show="feedback.profileNameShowError">Your changed name couldn't be saved, check both fields are filled out and try again</div>
                </div>

                @(Html.Action<ProfileSurfaceController>("RenderProfileNamesForm"))


                <div class="wgrid-full parent">

                    <hr/>
                    <h4>Profile image</h4>

                </div>

                <div class="grid-8 grid-tablet-12 parent margin-bottom-large">

                    <div class="boxx internal" m-radius-picker="small">

                        @* display the profile picture *@
                        <div m-profile-image="{{ pageProfile.imageUrl }}" m-radius-picker="small"></div>


                        <div class="image-shift-details">
                            <div m-image-upload m-on-start-event="profileImageUploadStart" m-on-success-event="profileImageUpdated">


                                @(Html.Action<ProfileSurfaceController>("RenderProfileImageForm"))


                            </div>

                            <div class="loader pos-static" ng-show="pageFeedback.profileImageProcessing"></div>

                            <div class="successful" ng-show="pageFeedback.profileImageShowSuccess">Image uploaded successfully</div>
                            <div class="errorred" ng-show="pageFeedback.profileImageShowError">Oops something went wrong!</div>

                            <div class="file-upload-info margin-left-0">Recommended dimensions of 500x500</div>
                            <div class="file-upload-info margin-left-0">Maximum file size of 1MB</div>
                        </div>
                    </div>
                </div>


                <div class="wgrid-full pad-0">

                    <hr/>

                    <h3>Your address</h3>

                    @if (this.Members.GetCurrentPartier() is PartyHost)
                    {
                        <p>Please change your party address on your <a href="@(((IPartier)this.Members.GetCurrentMember()).PartyUrl)" class="body-highlight">party page</a>.</p>

                        <p>If you want to change the delivery address for your party kit please contact the support team by email <span class="body-highlight">wonderland@macmillan.org.uk</span> or call <span class="body-emphasize">02380 654 456</span></p>

                        <hr/>
                    }

                </div>

                <div class="grid-8 grid-tablet-12 parent margin-bottom-large">

                    <h4 class="tight">Billing address</h4>

                    <div class="successful margin-bottom-small" ng-show="feedback.profileBillingAddressShowSuccess">Your billing address was successfully changed</div>
                    <div class="errorred margin-bottom-small" ng-show="feedback.profileBillingAddressShowError">Your changed billing address couldn't be saved, please check the details and try again</div>

                </div>

                <div class="wgrid-full parent">


                    @(Html.Action<ProfileSurfaceController>("RenderProfileBillingAddressForm"))


                </div>

                <div class="grid-8 grid-tablet-12 parent margin-bottom-large">

                    <h3>Change your password</h3>

                    <div class="successful margin-bottom-small" ng-show="feedback.profilePasswordShowSuccess">Your password was successfully changed</div>
                    <div class="errorred margin-bottom-small" ng-show="feedback.profilePasswordShowError">Your changed password couldn't be saved, please try again</div>

                </div>

                <div class="wgrid">

                    @(Html.Action<ProfileSurfaceController>("RenderProfileChangePasswordForm"))

                </div>

                @if (this.Members.GetCurrentPartier() is PartyHost)
                { 
                    <div class="wgrid">
                        @(Html.Action<ProfileSurfaceController>("RenderProfileTShirtSizeForm"))
                    </div>
                }

            </div>

        </div>

    </div>

</div>
