@model PartyImageForm


<div ng-init="partyImageDefaultDataInit(
    @Html.Raw(Json.Encode(Model.DefaultImages.Select(x => x.Url)))
)"></div>



<script type="text/ng-template" id="partials/partyImageForm.html">

    <div class="">
        <h4>Choose a party image from our gallery</h4>


        @* Dynamic defaults *@

        <div class="party-image-container" ng-class="{'selected': partyImageData.PartyImage==defaultImage}" ng-repeat="defaultImage in partyImageDefaultData">
            <label>
                <input type="radio" name="urlSelectar" ng-model="partyImageData.PartyImage" ng-value="defaultImage"  />
                <div class="party-image-selecter" ng-style="{'background-image': 'url(' + defaultImage + ')'}" m-radius-picker="small"></div>
            </label>
            <div class="warner" ng-click="partyImageData.PartyImage=null">Deselect image <span class="icon-icon_x"></span></div>
        </div>

        <div class="clear"></div>
    </div>


    <h4>Or upload your own</h4>


    <div class="boxx internal margin-bottom-medium" m-radius-picker="small">

        <div class="party-image-container"ng-class="{'selected': (partyImageData.PartyImage==partyCustomImage.url && partyCustomImage.url)}">
            <label>
                <input type="radio" name="urlSelectar" ng-model="partyImageData.PartyImage" value="{{ partyCustomImage.url }}" ng-disabled="!partyCustomImage.url"  />
                <div class="party-image-selecter icon-icon_question_mark" ng-style="{'background-image': 'url(' + partyCustomImage.url + ')'}" ng-class="{'image-set': partyCustomImage.url, 'image-unset': !partyCustomImage.url}" m-radius-picker="small"></div>
            </label>
            <div class="warner" ng-click="partyImageData.PartyImage=null">Deselect image <span class="icon-icon_x"></span></div>
        </div>

        @(Html.Action<PartySurfaceController>("RenderCustomPartyImageForm"))

        <div class="file-upload-info">Recommended dimensions of 500x500</div>
        <div class="file-upload-info">Maximum file size of 1MB</div>
    </div>

    <div>
        @using (Html.BeginUmbracoForm<PartySurfaceController>("HandlePartyImageForm", FormMethod.Post, new { m_serialized="", m_post_on_submit="partyImageData", m_on_success_event="partyImageUpdated" }))
        {
            @Html.AntiForgeryToken()

            <input name="PartyImage" type="hidden" ng-model="partyImageData.PartyImage">

            <button type="submit" class="btn-primary float-right" ng-disabled="!partyImageData.PartyImage" m-radius-picker="small medium">Save changes</button>
            <span class="cancel margin-right-1 float-right">Cancel</span>
        }
    </div>
</script>